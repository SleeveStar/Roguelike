.hidden {
    display: none !important;
}

/* General Styling */
body {
    --bg-dark: #000; /* Pure black background */
    --text-light: #fff; /* Pure white text */
    --accent-blue: #00bcd4; /* Cyan/Teal accent */
    --accent-green: #8bc34a; /* Lime green for player/XP */
    --border-grey: #5a5a7a; /* Slightly lighter grey for borders */
    --panel-bg: rgba(25, 25, 25, 0.9); /* Very dark transparent grey for panel */
    --accent-blue-rgb: 0, 188, 212; /* RGB components for accent-blue */

    font-family: 'Spoqa Han Sans Neo', 'sans-serif';
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    margin: 0;
    background-color: var(--bg-dark);
    color: var(--text-light);
    font-size: 16px;
    line-height: 1.5;
    text-rendering: optimizeLegibility;
}

/* Headings */
h1, h2, h3 {
    font-family: 'Spoqa Han Sans Neo', 'sans-serif';
    font-weight: 700;
}

h1 {
    font-size: 2.5em;
    color: var(--accent-blue);
    text-shadow: 0 0 10px var(--accent-blue), 0 0 20px rgba(0, 188, 212, 0.5);
    margin-bottom: 25px;
    letter-spacing: 2px;
}

/* Game Container */
#gameContainer {
    display: flex;
    gap: 30px; /* More space for a cleaner look */
    margin-top: 30px;
    padding: 20px;
    background-color: rgba(0, 0, 0, 0.3); /* Slightly transparent overlay */
    border-radius: 8px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
    transform: scale(0.8);
    transform-origin: top;
}

/* Player Status Panel */
#playerStatus {
    width: 280px; /* Slightly wider panel */
    background-color: var(--panel-bg);
    border: 1px solid var(--border-grey);
    border-radius: 6px;
    padding: 10px; /* Reduced padding */
    box-sizing: border-box;
    color: var(--text-light);
    font-size: 0.9em; /* Increased font size */
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.4);
    max-height: 850px;
    /* overflow-y: auto; -- Removed as per user request */
}

#playerStatus h3 {
    font-family: 'Roboto Mono', monospace;
    font-size: 1.05em; /* Increased font size */
    color: var(--accent-blue);
    margin-top: 10px; /* Reduced margin */
    margin-bottom: 5px; /* Reduced margin */
    text-align: left;
    text-shadow: none;
    border-bottom: 1px solid rgba(0, 188, 212, 0.2);
    padding-bottom: 5px;
}

.stat-group {
    margin-bottom: 10px; /* Reduced margin */
}

.stat-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 4px 0; /* Reduced margin */
}

.stat-item span:first-child { /* Label */
    flex-grow: 1;
}

#playerStatus span {
    font-weight: bold;
    color: var(--text-light); /* Set to white text */
}

/* Bonus Points Animation */
@keyframes blink {
    0%, 100% { color: var(--accent-green); text-shadow: 0 0 8px var(--accent-green); }
    50% { color: var(--text-light); text-shadow: none; }
}

.has-bonus-points span#statBonusPoints {
    animation: blink 1.5s infinite;
}


/* Canvas */
canvas {
    /* width and height will be controlled by HTML attributes directly */
    border: 2px solid var(--border-grey);
    background-color: #000;
    border-radius: 6px;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.4);
}

/* Player Status HP/MP Bars */
.status-bar-container {
    width: 100%;
    background-color: #3a3a5a;
    border: 1px solid var(--border-grey);
    margin-top: 5px;
    margin-bottom: 10px;
    height: 18px; /* Reduced height */
    position: relative;
    border-radius: 4px;
}

.status-bar-fill {
    height: 100%;
    width: 100%; /* Initial full, will be dynamic */
    transition: width 0.3s ease-in-out;
    border-radius: 4px;
}

#playerStatusHpBar {
    background-color: var(--accent-green); /* Player HP bar color */
}

#playerStatusMpBar {
    background-color: var(--accent-blue); /* Player MP bar color */
}


/* XP Bar */
#xpBarContainer {
    width: 100%;
    background-color: #3a3a5a;
    border: 1px solid var(--border-grey);
    margin-top: 15px;
    height: 20px; /* Reduced height */
    position: relative; /* Added relative positioning for children */
    border-radius: 4px;
}

#xpBar {
    width: 0%; /* Will be controlled by JavaScript */
    height: 100%;
    background: linear-gradient(to right, var(--accent-green), #4CAF50); /* Gradient for XP */
    transition: width 0.3s ease-in-out;
    border-radius: 4px;
}

/* Stat Allocation Buttons */
.stat-entry {
    display: inline-flex;
    align-items: center;
    gap: 10px; /* More space */
}

.allocate-btn {
    background: transparent;
    color: var(--border-grey);
    border: 1px solid var(--border-grey);
    border-radius: 4px;
    padding: 2px 8px;
    cursor: pointer;
    font-size: 0.9em;
    line-height: 1;
    transition: all 0.2s;
    box-shadow: none;
}

.allocate-btn:hover:not(:disabled) {
    background: var(--accent-blue);
    color: var(--bg-dark);
    border-color: var(--accent-blue);
    transform: translateY(-1px);
    box-shadow: 0 0 8px rgba(0, 188, 212, 0.5);
}

.allocate-btn:disabled {
    background: transparent;
    color: #555;
    border-color: #555;
    cursor: not-allowed;
    box-shadow: none;
}

/* Player Actions Button (Inventory) */
.player-actions {
    margin-top: 15px; /* Reduced margin */
    text-align: center;
}

.action-btn { /* Generic action button style */
    font-family: 'Roboto Mono', monospace; /* Consistent font */
    font-size: 1em; /* Reduced font size */
    font-weight: bold;
    letter-spacing: 0.5px;
    transition: all 0.2s ease;
    cursor: pointer;
    border-radius: 5px;
    margin: 5px;
    min-width: 120px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

.action-btn#inventoryBtn { /* Specific style for the inventory button */
    background-color: var(--panel-bg);
    border: 1px solid var(--border-grey);
    color: var(--text-light);
    padding: 8px 15px;
}

.action-btn#inventoryBtn:hover {
    background-color: rgba(var(--accent-blue-rgb), 0.2);
    border-color: var(--accent-blue);
    color: var(--accent-blue);
    transform: translateY(-1px);
    box-shadow: 0 0 10px var(--accent-blue);
}

.action-btn#skillTreeBtn { /* Specific style for the inventory button */
    background-color: var(--panel-bg);
    border: 1px solid var(--border-grey);
    color: var(--text-light);
    padding: 8px 15px;
}

.action-btn#skillTreeBtn:hover {
    background-color: rgba(var(--accent-blue-rgb), 0.2);
    border-color: var(--accent-blue);
    color: var(--accent-blue);
    transform: translateY(-1px);
    box-shadow: 0 0 10px var(--accent-blue);
}



/* Info Panel Styles (previously Combat Panel) */
#infoPanel {
    width: 280px;
    height: auto; 
    background-color: var(--panel-bg);
    border: 1px solid var(--border-grey);
    border-radius: 6px;
    padding: 20px;
    box-sizing: border-box;
    color: var(--text-light);
    font-size: 0.95em;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.4);
    display: flex;
    flex-direction: column;
    max-height: 850px;
}

#infoPanel h2 {
    color: var(--accent-blue);
    margin-top: 0;
    margin-bottom: 20px;
    font-size: 1.5em;
    text-shadow: 0 0 5px rgba(0, 188, 212, 0.3);
}

#infoPanel h3 {
    font-family: 'Roboto Mono', monospace;
    font-size: 1.1em;
    color: var(--accent-blue);
    margin-top: 15px;
    margin-bottom: 10px;
    text-align: left;
    text-shadow: none;
    border-bottom: 1px solid rgba(0, 188, 212, 0.2);
    padding-bottom: 5px;
}

#side-panel-equipment-container {
    margin-bottom: 20px;
}

#side-panel-equipment {
    display: flex;
    flex-direction: column;
    gap: 5px;
    padding: 10px;
    background-color: rgba(0,0,0,0.3);
    border-radius: 4px;
    min-height: 150px;
}

#side-panel-equipment .equipped-item-display .slot {
    font-weight: bold;
    color: #aaa;
    min-width: 60px;
    display: inline-block;
}

#infoLog {
    background-color: rgba(0, 0, 0, 0.7);
    border: 1px solid var(--border-grey);
    border-radius: 6px;
    width: 100%; /* Fill infoPanel width */
    flex-grow: 1; /* Take up remaining vertical space */
    overflow-y: auto;
    font-size: 0.85em;
    text-align: left;
    color: var(--text-light);
    max-height: 370px;
}

#infoLog p {
    padding-left: 7px;
    margin: 5px 0;
}

/* Cleanup old combat panel styles */
#monsterInfo.stat-group, #combatActions.stat-group {
    display: none;
}

#playerCombatStats.stat-group {
    display: none;
}

/* Overlay text for health/mana/xp bars */
.bar-text-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white; /* Ensure text is visible over the bar */
    text-shadow: 1px 1px 3px black; /* Add shadow for readability */
    font-weight: bold;
    font-size: 0.9em;
    pointer-events: none;
}

/* Inventory Overlay Styles */
#inventoryOverlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.85); /* Darker, more opaque background */
    z-index: 100; /* Ensure it's above everything else */
    display: flex; /* Use flexbox for centering */
    align-items: center; /* Vertical center */
    justify-content: center; /* Horizontal center */
}

#inventoryOverlay.hidden {
    display: none;
}

#inventoryPanel {
    background-color: var(--panel-bg);
    border: 2px solid var(--accent-blue);
    border-radius: 8px;
    padding: 30px;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
    width: 90vw; /* Responsive width */
    max-width: 1000px; /* Max width for larger screens */
    /*height: 80vh; !* Responsive height *!*/
    max-height: 800px; /* Max height */
    display: flex;
    flex-direction: column;
    position: relative; /* Changed from fixed */
}

#inventoryPanel h2 {
    text-align: center;
    color: var(--accent-blue);
    margin-bottom: 25px;
    font-size: 2em;
    text-shadow: 0 0 10px var(--accent-blue);
}

#closeInventoryBtn {
    position: absolute;
    top: 15px;
    right: 15px;
    background-color: #dc3545; /* Red close button */
    color: white;
    border: none;
    border-radius: 50%; /* Circular button */
    width: 30px;
    height: 30px;
    font-size: 1.2em;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.2s;
}

#closeInventoryBtn:hover {
    background-color: #c82333;
}

#inventoryContent {
    display: flex;
    flex-grow: 1; /* Allow content to fill available space */
    gap: 20px;
}

/* Equipment Section */
#equipmentSection {
    flex: 1; /* Take up remaining space */
    background-color: rgba(0, 0, 0, 0.2);
    border: 1px solid var(--border-grey);
    border-radius: 5px;
    padding: 15px;
    display: flex;
    flex-direction: column;
}

#equipmentSection h3 {
    color: var(--accent-green);
    text-align: center;
    margin-top: 0;
    margin-bottom: 20px;
    text-shadow: 0 0 5px rgba(139, 195, 74, 0.3);
}

.equipment-slots {
    display: grid;
    grid-template-columns: repeat(3, 80px); /* Adjust as needed for visual character shape */
    grid-template-rows: repeat(5, 80px); /* Adjust as needed */
    gap: 10px;
    justify-content: center;
    align-content: center; /* Center the grid vertically */
    flex-grow: 1;
}

.eq-slot {
    width: 80px;
    height: 80px;
    border: 1px dashed var(--border-grey); /* Dashed border for empty slots */
    background-color: rgba(255, 255, 255, 0.05); /* Very subtle background */
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-light);
    font-size: 0.8em;
    text-align: center;
    cursor: pointer;
    transition: background-color 0.2s, border-color 0.2s;
}

.eq-slot:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: var(--accent-blue);
}

.eq-slot.equipped {
    background-color: rgba(255, 255, 255, 0.08);
    border-style: solid;
    color: var(--accent-blue);
    font-weight: bold;
}

/* Specific slot positioning for a 'person' shape */
.eq-slot.hat        { grid-area: 1 / 2 / 2 / 3; } /* Row 1, Col 2 */
.eq-slot.neck       { grid-area: 2 / 2 / 3 / 3; } /* Row 2, Col 2 */
.eq-slot.shoulder   { grid-area: 2 / 1 / 3 / 2; } /* Row 2, Col 1 */
.eq-slot.main-hand  { grid-area: 3 / 1 / 4 / 2; } /* Row 3, Col 1 */
.eq-slot.chest      { grid-area: 3 / 2 / 4 / 3; } /* Row 3, Col 2 */
.eq-slot.off-hand   { grid-area: 3 / 3 / 4 / 4; } /* Row 3, Col 3 */
.eq-slot.wrist      { grid-area: 4 / 1 / 5 / 2; } /* Row 4, Col 1 */
.eq-slot.legs       { grid-area: 4 / 2 / 5 / 3; } /* Row 4, Col 2 */
.eq-slot.ring1      { grid-area: 4 / 3 / 5 / 4; } /* Row 4, Col 3 */
.eq-slot.ring2      { grid-area: 5 / 1 / 6 / 2; } /* Row 5, Col 1 */
.eq-slot.feet       { grid-area: 5 / 2 / 6 / 3; } /* Row 5, Col 2 */


/* Bag Section */
#bagSection {
    flex: 2; /* Take up more space */
    background-color: rgba(0, 0, 0, 0.2);
    border: 1px solid var(--border-grey);
    border-radius: 5px;
    padding: 15px;
    display: flex;
    flex-direction: column;
    /* max-width: fit-content; -- Removed */
}

#bagSection h3 {
    color: var(--accent-green);
    text-align: center;
    margin-top: 0;
    margin-bottom: 20px;
    text-shadow: 0 0 5px rgba(139, 195, 74, 0.3);
}

.bag-grid {
    display: grid;
    /*grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); !* Responsive grid restored *!*/
    grid-template-columns: repeat(6, 1fr);
    grid-auto-rows: minmax(60px, auto);
    gap: 8px;
    flex-grow: 1;
    overflow-y: auto; /* Scroll for many items */
}

.bag-slot {
    width: 80px;
    height: 80px;
    border: 2px solid var(--border-grey); /* Thicker border */
    background-color: rgba(255, 255, 255, 0.05);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-light);
    font-size: 0.7em;
    text-align: center;
    cursor: pointer;
    transition: background-color 0.2s, border-color 0.2s;
    word-break: break-word;
    padding: 2px;
}

.bag-slot:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: var(--accent-blue);
}

/* Item Tooltip Styles */
#itemTooltip {
    position: fixed;
    z-index: 110;
    background-color: rgba(25, 25, 25, 0.95); /* #skillTooltip에서 가져옴 */
    border: 2px solid var(--accent-blue); /* #skillTooltip에서 가져옴 */
    border-radius: 5px;
    padding: 10px;
    display: flex; /* 기본값은 row, 유지 */
    gap: 15px;
    font-size: 0.9em;
    pointer-events: none;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5); /* #skillTooltip에서 가져옴 */
    opacity: 0;
    transition: opacity 0.1s ease-in-out;
    box-sizing: border-box;
    max-width: 450px; /* 아이템 툴팁을 위해 적절한 최대 너비 설정 */
    overflow-wrap: break-word; /* 텍스트 줄 바꿈 추가 */
}

#itemTooltip.hidden {
    display: none;
}

.tooltip-section {
    display: flex;
    flex-direction: column;
    gap: 5px;
    min-width: 200px;
}

.tooltip-section h4 {
    margin: 0 0 5px 0;
    font-size: 1.1em;
    border-bottom: 1px solid var(--border-grey);
    padding-bottom: 5px;
    text-align: left; /* 추가: 왼쪽 정렬 */
}

.tooltip-section .stat, .tooltip-section .affix {
    font-size: 0.95em;
}

.affix {
    color: var(--accent-green);
}

.item-level {
    color: var(--text-light); /* White text */
    font-size: 0.85em;
    margin-bottom: 5px;
}

.item-rarity {
    font-size: 0.9em;
    font-weight: bold;
    margin-bottom: 5px;
}

/* Merchant Overlay Styles */
#merchantOverlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.85); /* Darker, more opaque background */
    z-index: 100; /* Ensure it's above everything else */
    display: flex; /* Use flexbox for centering */
    align-items: center; /* Vertical center */
    justify-content: center; /* Horizontal center */
}

#merchantOverlay.hidden {
    display: none;
}

#merchantPanel {
    background-color: var(--panel-bg);
    border: 2px solid var(--accent-blue);
    border-radius: 8px;
    padding: 30px;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
    width: 90vw; /* Responsive width */
    max-width: 1000px; /* Max width for larger screens */
    height: 80vh; /* Responsive height */
    max-height: 800px; /* Max height */
    display: flex;
    flex-direction: column;
    position: relative;
}

#merchantPanel h2 {
    text-align: center;
    color: var(--accent-blue);
    margin-bottom: 25px;
    font-size: 2em;
    text-shadow: 0 0 10px var(--accent-blue);
}

#closeMerchantBtn {
    position: absolute;
    top: 15px;
    right: 15px;
    background-color: #dc3545; /* Red close button */
    color: white;
    border: none;
    border-radius: 50%; /* Circular button */
    width: 30px;
    height: 30px;
    font-size: 1.2em;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.2s;
}

#closeMerchantBtn:hover {
    background-color: #c82333;
}

#merchantContent {
    display: flex;
    flex-grow: 1;
    gap: 20px;
}

#merchantStockSection {
    flex: 1; /* Left side, smaller */
    background-color: rgba(0, 0, 0, 0.2);
    border: 1px solid var(--border-grey);
    border-radius: 5px;
    padding: 15px;
    display: flex;
    flex-direction: column;
}

#playerSellSection {
    flex: 2; /* Right side, larger */
    background-color: rgba(0, 0, 0, 0.2);
    border: 1px solid var(--border-grey);
    border-radius: 5px;
    padding: 15px;
    display: flex;
    flex-direction: column;
    max-width: fit-content; /* Ensure it fits 8 columns tightly */
}

#merchantStockSection h3, #playerSellSection h3 {
    color: var(--accent-green);
    text-align: center;
    margin-top: 0;
    margin-bottom: 20px;
    text-shadow: 0 0 5px rgba(139, 195, 74, 0.3);
}

.merchant-grid {
    display: grid;
    grid-template-columns: repeat(3, 80px); /* 3 columns, 80px each like equipment */
    grid-auto-rows: minmax(80px, auto); /* Adjust row height too */
    gap: 10px; /* Same gap as equipment-slots */
    justify-content: center; /* Center the grid */
    align-content: center;
    flex-grow: 1;
    overflow-y: auto;
}

.merchant-slot {
    width: 80px; /* Fixed width */
    height: 80px;
    border: 2px solid var(--border-grey);
    background-color: rgba(255, 255, 255, 0.05);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-light);
    font-size: 0.7em;
    text-align: center;
    cursor: pointer;
    transition: background-color 0.2s, border-color 0.2s;
    word-break: break-word;
    padding: 2px;
}

.merchant-slot:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: var(--accent-blue);
}

.player-sell-grid { /* Explicitly define player-sell-grid to match bag-grid */
    display: grid;
    grid-template-columns: repeat(6, 1fr); /* 6 columns for player bag */
    grid-auto-rows: minmax(60px, auto);
    gap: 8px;
    flex-grow: 1;
    overflow-y: auto;
}

/* Additional style for equipped items in sell view */
.bag-slot.equipped-for-sell {
    cursor: not-allowed;
    opacity: 0.5; /* Dim equipped items */
}

#merchantPlayerGold {
    text-align: right;
    font-size: 1.1em;
    font-weight: bold;
    margin-top: 20px;
    color: gold;
}

/* Pokemon Battle UI Styles */
#pokemonBattleOverlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.9);
    z-index: 200;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    /*background-image: url('https://i.imgur.com/gY4zhh7.png');*/
    background-size: cover;
    background-position: center;
    image-rendering: pixelated; /* For a retro feel */
}

#battleMonsterArea {
    position: absolute;
    top: 5%;
    right: 5%;
    display: flex;
    flex-direction: column;
    align-items: center;
}

#battlePlayerArea {
    position: absolute;
    bottom: 25%; /* Position above the action bar */
    left: 5%;
    display: flex;
    flex-direction: column;
    align-items: center;
}

#battleMonsterSprite, #battlePlayerSprite {
    height: 256px; /* Larger sprite size */
    width: 256px;
    object-fit: contain;
    image-rendering: pixelated;
}

.battle-status-box {
    background-color: #f8f8f8;
    border: 4px solid #333;
    border-radius: 8px;
    padding: 12px;
    color: #333;
    font-family: 'Spoqa Han Sans Neo', 'sans-serif';
    width: 280px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
}

#battleMonsterArea .battle-status-box {
    margin-bottom: 20px; /* Space between status and sprite */
}

#battlePlayerArea .battle-status-box {
    margin-top: 20px; /* Space between status and sprite */
}


.status-name-level {
    display: flex;
    justify-content: space-between;
    font-weight: bold;
    font-size: 1.2em;
    margin-bottom: 8px;
}

.battle-hp-bar-container, .battle-mp-bar-container {
    width: 100%;
    background-color: #c0c0c0;
    border: 2px solid #333;
    border-radius: 4px;
    height: 22px;
    margin-top: 6px;
    position: relative;
}

.battle-hp-bar-fill {
    height: 100%;
    background-color: #32CD32; /* Green for HP */
    border-radius: 2px;
    transition: width 0.5s ease-out;
}

.battle-mp-bar-fill {
    height: 100%;
    background-color: #1E90FF; /* Blue for MP */
    border-radius: 2px;
    transition: width 0.5s ease-out;
}

.battle-bar-text-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    text-shadow: 1px 1px 2px black;
    font-weight: bold;
    font-size: 0.9em;
    pointer-events: none;
}


#battleActionBar {
    width: 100%;
    height: 20%;
    position: absolute;
    bottom: 0;
    left: 0;
    background-color: var(--panel-bg);
    border-top: 4px solid var(--border-grey);
    display: flex;
    color: white;
}

#battleLog {
    flex: 3; /* Takes up 3/4 of the space */
    padding: 20px;
    overflow-y: auto;
    font-size: 1.1em;
    border-right: 4px solid var(--border-grey);
}

#battleLog p {
    margin: 0 0 5px 0;
}

#battleButtons {
    flex: 1; /* Takes up 1/4 of the space */
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    padding: 20px;
    align-items: center;
    justify-content: center;
}

.battle-action-btn {
    background-color: #f0f0f0;
    color: #333;
    border: 2px solid #555;
    border-radius: 8px;
    font-family: 'Spoqa Han Sans Neo', 'sans-serif';
    font-weight: bold;
    font-size: 1.2em;
    cursor: pointer;
    transition: all 0.2s;
    padding: 15px;
}

.battle-action-btn:hover:not(:disabled) {
    background-color: #ddd;
    border-color: #111;
}

.battle-action-btn:disabled {
    background-color: #999;
    color: #666;
    cursor: not-allowed;
}

#battleRunAwayBtn {
    grid-column: 1 / -1; /* Make "Run" button span both columns */
}
/* New Item Tooltip Specific Styles */
.item-unique-tag {
    font-weight: bold;
    text-align: left; /* 중앙 정렬에서 왼쪽 정렬로 변경 */
    margin-bottom: 5px;
    text-shadow: 0 0 5px currentColor;
}

.set-name {
    font-weight: bold;
    text-align: left; /* 중앙 정렬에서 왼쪽 정렬로 변경 */
    font-size: 1.2em;
    margin-bottom: 5px;
    text-shadow: 0 0 5px currentColor;
}

.set-theme {
    font-style: italic;
    font-size: 0.85em;
    color: #bbb;
    margin-bottom: 10px;
    text-align: left; /* 중앙 정렬에서 왼쪽 정렬로 변경 */
}

.set-pieces-title, .set-bonuses-title {
    font-weight: bold;
    margin-top: 10px;
    margin-bottom: 5px;
    border-bottom: 1px dashed rgba(255,255,255,0.1);
    padding-bottom: 3px;
    color: var(--accent-blue);
    text-align: left; /* 추가: 왼쪽 정렬 */
}

.set-piece-item, .set-bonus-detail {
    font-size: 0.9em;
    margin-left: 5px;
    line-height: 1.4;
    text-align: left; /* 추가: 왼쪽 정렬 */
}

/* Equipped Set Item Glow Effect */
@keyframes glowing-border {
    0% { border-color: #FFD700; box-shadow: 0 0 5px #FFD700; }
    50% { border-color: #FFA500; box-shadow: 0 0 15px #FFA500; }
    100% { border-color: #FFD700; box-shadow: 0 0 5px #FFD700; }
}

.eq-slot.equipped.set-item-glow {
    animation: glowing-border 2s infinite alternate;
}

/* Skill Tree Modal Specific Styles */
#skillTreeModal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.85); /* Darker, more opaque background */
    z-index: 100; /* Ensure it's above everything else */
    display: flex; /* Use flexbox for centering */
    align-items: center; /* Vertical center */
    justify-content: center; /* Horizontal center */
}

.skill-tree-panel {
    background-color: var(--panel-bg);
    border: 2px solid var(--accent-blue);
    border-radius: 8px;
    padding: 30px;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
    width: 90vw;
    max-width: 1200px;
    height: 90vh;
    max-height: 900px;
    display: flex;
    flex-direction: column;
    position: relative;
}

#closeSkillTreeModal {
    position: absolute;
    top: 15px;
    right: 15px;
    background-color: #dc3545; /* Red close button */
    color: white;
    border: none;
    border-radius: 50%; /* Circular button */
    width: 30px;
    height: 30px;
    font-size: 1.2em;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.2s;
}

#closeSkillTreeModal:hover {
    background-color: #c82333;
}

.skill-tree-panel h2 {
    text-align: center;
    color: var(--accent-blue);
    margin-bottom: 15px;
    font-size: 2em;
    text-shadow: 0 0 10px var(--accent-blue);
}

.skill-tree-container {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    background-color: rgba(0, 0, 0, 0.2);
    border: 1px solid var(--border-grey);
    border-radius: 5px;
    padding: 10px;
    margin-bottom: 15px;
}

.skill-tree-tabs {
    display: flex;
    justify-content: center;
    margin-bottom: 15px;
    gap: 10px;
}

.tab-btn {
    background-color: var(--panel-bg);
    color: var(--text-light);
    border: 1px solid var(--border-grey);
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1.1em;
    transition: all 0.2s;
}

.tab-btn:hover:not(.active) {
    background-color: rgba(var(--accent-blue-rgb), 0.2);
    border-color: var(--accent-blue);
    color: var(--accent-blue);
}

.tab-btn.active {
    background-color: var(--accent-blue);
    color: var(--bg-dark);
    border-color: var(--accent-blue);
    cursor: default;
    box-shadow: 0 0 10px rgba(var(--accent-blue-rgb), 0.5);
}

#skill-tree-area {
    flex-grow: 1;
    position: relative; /* For absolute positioning of skill nodes */
    overflow-y: auto; /* Allow vertical scrolling */
    overflow-x: hidden; /* Hide horizontal scrolling */
    background-color: rgba(0, 0, 0, 0.1);
    border-radius: 5px;
}

/* Skill Node Styles */
.skill-node {
    position: absolute;
    width: 70px; /* Size of skill icon */
    height: 70px;
    background-color: rgba(255, 255, 255, 0.1);
    border: 2px solid var(--border-grey);
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-size: 0.8em; /* 폰트 크기 복원 */
    color: var(--text-light);
    cursor: pointer; /* 커서 복원 */
    transition: all 0.2s;
    user-select: none; /* Prevent text selection */
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    padding: 5px; /* 패딩 복원 */
}

.skill-node img {
    width: 40px; /* 이미지 크기 복원 */
    height: 40px; /* 이미지 크기 복원 */
    object-fit: contain;
    margin-bottom: 2px;
    border-radius: 5px;
}

.skill-node .skill-name {
    font-size: 0.8em; /* 폰트 크기 복원 */
    font-weight: bold;
    text-align: center;
    line-height: 1.2;
}

.skill-node .skill-level {
    font-size: 0.6em; /* 폰트 크기 복원 */
    color: #ccc;
}


.skill-node.learned {
    border-color: var(--accent-green);
    background-color: rgba(139, 195, 74, 0.2);
}

.skill-node.max-level {
    border-color: gold;
    background-color: rgba(255, 215, 0, 0.2);
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

.skill-node.available {
    border-color: var(--accent-blue);
    box-shadow: 0 0 8px rgba(0, 188, 212, 0.5);
    background-color: rgba(0, 188, 212, 0.2);
}

.skill-node.locked {
    filter: grayscale(100%) brightness(50%);
    cursor: not-allowed;
    border-color: #555;
    background-color: rgba(0, 0, 0, 0.5);
}

.skill-node:hover:not(.locked) {
    transform: scale(1.05);
    border-color: var(--text-light);
    box-shadow: 0 6px 12px rgba(0,0,0,0.5);
}

#skill-slot-bar-management {
    display: flex;
    flex-direction: row; /* 요소를 수평으로 정렬 */
    justify-content: center; /* 중앙으로 정렬 */
    align-items: center; /* 수직 중앙 정렬 */
    gap: 10px; /* 슬롯 박스 간의 간격 */
    padding: 10px 0; /* 상하 패딩 추가 */
    margin-top: 15px; /* 스킬 트리와 분리 */
    background-color: rgba(0, 0, 0, 0.3);
    border-radius: 8px;
}

.skill-slot-box {
    width: 60px; /* Adjust size as needed */
    height: 60px; /* Adjust size as needed */
    border: 2px solid var(--border-grey); /* 명확한 테두리 */
    background-color: rgba(255, 255, 255, 0.05);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-light);
    font-size: 0.9em;
    text-align: center;
    cursor: pointer;
    transition: background-color 0.2s, border-color 0.2s;
    word-break: break-word;
    padding: 2px;
}

.skill-slot-box:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: var(--accent-blue);
}

.skill-slot-box.has-skill {
    border-color: var(--accent-green); /* 스킬이 장착되면 테두리 색상 변경 */
}

/* 스킬 노드 블링크 애니메이션 */
@keyframes skill-node-blink {
    0% { box-shadow: 0 0 8px var(--accent-blue), 0 0 15px rgba(var(--accent-blue-rgb), 0.4); }
    100% { box-shadow: 0 0 8px rgba(var(--accent-blue-rgb), 0.2), 0 0 15px rgba(var(--accent-blue-rgb), 0.1); }
}

/* 스킬 트리 연결선 캔버스 */
.skill-tree-connection-canvas {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 0; /* 노드들보다 뒤에 */
    pointer-events: none; /* 캔버스 클릭 방지 */
}

/* 스킬 툴팁 스타일 (새로운 #skillTooltip ID에 적용) */
#skillTooltip {
    position: fixed;
    z-index: 110; /* Above inventory overlay */
    background-color: rgba(25, 25, 25, 0.95); /* itemTooltip.skill-tooltip에서 가져옴 */
    border: 2px solid var(--accent-blue); /* itemTooltip.skill-tooltip에서 가져옴 */
    border-radius: 5px; /* itemTooltip에서 가져옴 */
    padding: 10px; /* itemTooltip에서 가져옴 */
    display: flex; /* 명시적으로 flex 컨테이너 선언 (이전 itemTooltip.skill-tooltip에서 이동) */
    flex-direction: column; /* itemTooltip.skill-tooltip에서 가져옴 */
    gap: 8px; /* itemTooltip.skill-tooltip에서 가져옴 */
    font-size: 0.9em; /* itemTooltip에서 가져옴 */
    pointer-events: none; /* itemTooltip에서 가져옴 */
    box-shadow: 0 5px 15px rgba(0,0,0,0.5); /* itemTooltip에서 가져옴 */
    opacity: 0; /* itemTooltip에서 가져옴 */
    transition: opacity 0.1s ease-in-out; /* itemTooltip에서 가져옴 */
    box-sizing: border-box; /* itemTooltip.skill-tooltip에서 가져옴 */
    
    min-width: 0; /* itemTooltip.skill-tooltip에서 가져옴 */
    max-width: 200px; /* itemTooltip.skill-tooltip에서 가져옴 */
    overflow-wrap: break-word; /* itemTooltip.skill-tooltip에서 가져옴 */
}

#skillTooltip.hidden {
    display: none;
}

/* 스킬 툴팁 내부의 직접적인 div 자식 요소에 적용 */
#skillTooltip > div {
    width: 100%;
    box-sizing: border-box;
}



.skill-tooltip-name {
    font-size: 1.4em;
    font-weight: bold;
    color: var(--text-light);
    text-align: left; /* 중앙 정렬에서 왼쪽 정렬로 변경 */
    padding-bottom: 5px;
    margin-bottom: 5px;
    border-bottom: 1px solid rgba(255,255,255,0.2);
    word-break: break-all;
}

.skill-tooltip-type {
    font-size: 0.9em;
    color: #bbb;
    text-align: left; /* 중앙 정렬에서 왼쪽 정렬로 변경 */
    margin-bottom: 5px;
    word-break: break-all;
}

.skill-tooltip-level {
    font-size: 1em;
    font-weight: bold;
    color: var(--accent-green);
    margin-bottom: 5px;
    word-break: break-all;
    text-align: left; /* 추가: 왼쪽 정렬 */
}

.skill-tooltip-description, .skill-tooltip-next-description {
    font-size: 0.9em;
    color: #eee;
    line-height: 1.4;
    margin-bottom: 5px;
    word-break: break-all;
    text-align: left; /* 추가: 왼쪽 정렬 */
}

.skill-tooltip-next-level-title, .skill-tooltip-dependencies-title {
    font-size: 1em;
    font-weight: bold;
    color: var(--accent-blue);
    margin-top: 10px;
    margin-bottom: 5px;
    padding-bottom: 3px;
    border-bottom: 1px dashed rgba(var(--accent-blue-rgb), 0.3);
    word-break: break-all;
    text-align: left; /* 추가: 왼쪽 정렬 */
}

.skill-tooltip-cost {
    font-size: 0.9em;
    color: gold;
    margin-bottom: 5px;
    word-break: break-all;
    text-align: left; /* 추가: 왼쪽 정렬 */
}

.skill-tooltip-dependency {
    font-size: 0.85em;
    color: #aaa;
    margin-left: 10px;
    word-break: break-all;
    text-align: left; /* 추가: 왼쪽 정렬 */
}

.skill-tooltip-dependency.met {
    color: var(--accent-green);
    font-weight: bold;
}

.skill-tooltip-dependency.unmet {
    color: #c82333;
    font-style: italic;
}

/* Blinking Skill Button Animation */
@keyframes blink-animation {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

#skillTreeBtn.blinking {
    animation: blink-animation 1s infinite;
    border: 2px solid yellow; /* 반짝임을 시각적으로 강조 */
    box-shadow: 0 0 10px yellow;
}